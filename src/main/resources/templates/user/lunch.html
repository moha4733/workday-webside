<!DOCTYPE html>
<html lang="da" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Frokostpause | Workday</title>
  <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
</head>
<body>
  <div class="dashboard-wrapper">
    <nav class="sidebar">
      <h2>Workday</h2>
      <ul>
        <li><a th:href="@{/svend/dashboard}">Oversigt</a></li>
        <li><a th:href="@{/svend/projects}">Projekter</a></li>
        <li><a th:href="@{/svend/calculator}">Beregner</a></li>
        <li><a th:href="@{/svend/orders}">Bestillinger</a></li>
        <li><a th:href="@{/svend/worklogs}">Mine timer</a></li>
        <li><a th:href="@{/svend/time/sick-leave}">Sygemelding</a></li>
        <li><a th:href="@{/svend/time/vacation}">Ferieønsker</a></li>
        <li><a th:href="@{/svend/time/travel}">Kørseltillæg</a></li>
        <li><a href="#" class="active">Frokostpause</a></li>
        <li><a th:href="@{/svend/settings}">Indstillinger</a></li>
        <li>
          <form th:action="@{/logout}" method="post" style="margin: 0;">
            <input th:if="${_csrf != null}" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit" class="logout" style="background: none; border: none; color: #e74c3c; cursor: pointer; padding: 10px 20px; text-align: left; width: 100%; font-size: 14px;">Log ud</button>
          </form>
        </li>
      </ul>
    </nav>

    <main class="main-content">
      <header>
        <h1>Frokostpause</h1>
      </header>

      <div th:if="${success}" class="success-message" style="background-color: #4CAF50; color: white; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
        <p th:text="${success}"></p>
      </div>

      <div th:if="${error}" class="error-message" style="background-color: #f44336; color: white; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
        <p th:text="${error}"></p>
      </div>

      <section class="table-section">
        <h2>Registrer frokostpause</h2>
        <form th:action="@{/svend/time/lunch}" method="post" style="max-width: 600px;">
          <input th:if="${_csrf != null}" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
          <div style="margin-bottom: 15px;">
            <label for="date">Dato:</label>
            <input type="date" id="date" name="date" required style="width: 100%; padding: 8px; margin-top: 5px;">
          </div>
          <div style="margin-bottom: 15px;">
            <label for="durationMinutes">Varighed (minutter):</label>
            <input type="number" id="durationMinutes" name="durationMinutes" min="1" required style="width: 100%; padding: 8px; margin-top: 5px;">
          </div>
          <p style="color: #666; font-size: 14px; margin-bottom: 15px;">Hvis der allerede findes en frokostpause for denne dato, vil den blive opdateret.</p>
          <button type="submit" class="btn-primary">Registrer frokostpause</button>
        </form>
      </section>

      <section class="table-section">
        <h2>Mine frokostpauser</h2>
        <table>
          <thead>
            <tr>
              <th>Dato</th>
              <th>Varighed (minutter)</th>
              <th>Oprettet</th>
              <th>Handling</th>
            </tr>
          </thead>
          <tbody>
            <tr th:if="${lunchBreaks.isEmpty()}">
              <td colspan="4" style="text-align: center; padding: 20px;">Ingen frokostpauser registreret</td>
            </tr>
            <tr th:each="lunchBreak : ${lunchBreaks}">
              <td th:text="${lunchBreak.date}"></td>
              <td th:text="${lunchBreak.durationMinutes}"></td>
              <td th:text="${#temporals.format(lunchBreak.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
              <td>
                <form th:action="@{/svend/time/lunch/{id}/delete(id=${lunchBreak.id})}" method="post" style="display: inline;">
                  <input th:if="${_csrf != null}" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                  <button type="submit" class="btn-small" style="background-color: #f44336;" onclick="return confirm('Er du sikker på at du vil slette denne frokostpause?');">Slet</button>
                </form>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>
</body>
</html>
